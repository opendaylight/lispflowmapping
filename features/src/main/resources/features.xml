<?xml version="1.0" encoding="UTF-8"?>
<!-- vi: set et smarttab sw=4 tabstop=4: -->
<!--
 Copyright (c) 2014 Cisco Systems, Inc. and others.  All rights reserved.

 This program and the accompanying materials are made available under the
 terms of the Eclipse Public License v1.0 which accompanies this distribution,
 and is available at http://www.eclipse.org/legal/epl-v10.html
-->
<features name="odl-lispflowmapping-${lispflowmapping.version}" xmlns="http://karaf.apache.org/xmlns/features/v1.2.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://karaf.apache.org/xmlns/features/v1.2.0 http://karaf.apache.org/xmlns/features/v1.2.0">

    <repository>mvn:org.opendaylight.controller/features-mdsal/${mdsal.version}/xml/features</repository>
    <repository>mvn:org.opendaylight.controller/features-adsal/${sal.version}/xml/features</repository>

    <feature name="odl-lispflowmapping-all" description="OpenDaylight :: LISP Flow Mapping :: All" version='${lispflowmapping.version}'>
        <feature version="${lispflowmapping.version}">odl-lispflowmapping-mappingservice</feature>
        <feature version="${lispflowmapping.version}">odl-lispflowmapping-southbound</feature>
        <!--
            TODO : Enable the northbound feature once AD-SAL NSF & northbound feature works in Controller project.
        <feature version="${lispflowmapping.northbound.version}">odl-lispflowmapping-northbound</feature>
        -->
    </feature>

    <feature name="odl-lispflowmapping-mappingservice" description="OpenDaylight :: LISP Flow Mapping :: Mapping Service" version='${lispflowmapping.version}'>
        <feature version="${mdsal.version}">odl-mdsal-broker</feature>
        <feature version="${sal.version}">odl-adsal-core</feature>
        <feature version="${clustering.services.version}">odl-adsal-clustering</feature>
        <bundle>mvn:com.google.guava/guava/${guava.version}</bundle>
        <bundle>mvn:org.opendaylight.lispflowmapping/mappingservice.yangmodel/${lispflowmapping.version}</bundle>
        <bundle>mvn:org.opendaylight.lispflowmapping/mappingservice.api/${lispflowmapping.version}</bundle>
        <bundle>mvn:org.opendaylight.lispflowmapping/mappingservice.implementation/${lispflowmapping.version}</bundle>
        <bundle>mvn:org.opendaylight.lispflowmapping/mappingservice.clusterdao/${lispflowmapping.version}</bundle>
    </feature>

    <feature name="odl-lispflowmapping-southbound" description="OpenDaylight :: LISP Flow Mapping :: Southbound Plugin" version='${lispflowmapping.version}'>
        <feature version="${lispflowmapping.version}">odl-lispflowmapping-mappingservice</feature>
        <bundle>mvn:org.opendaylight.lispflowmapping/mappingservice.southbound/${lispflowmapping.version}</bundle>
    </feature>
<!--
    ADSAL Northbound and NSFs are not broken into Karaf Features yet.
    Also, the ADSAL Northbound is not modular enough to easily isolate it into bit-sized feature.
    It has a chain of AD-SAL NSF dependencies and hence the Controller project has not completed the AD-SAL karaf version.

    TODO : Enable the northbound feature once AD-SAL northbound feature is working in Controller project.

    <feature name="odl-lispflowmapping-northbound" description="OpenDaylight :: LISP Flow Mapping :: Northbound" version='${lispflowmapping.version}'>
        <feature version="${lispflowmapping.version}">odl-lispflowmapping-mappingservice</feature>
        <bundle>mvn:org.opendaylight.lispflowmapping/mappingservice.northbound/${lispflowmapping.version}</bundle>
    </feature>

-->
</features>
