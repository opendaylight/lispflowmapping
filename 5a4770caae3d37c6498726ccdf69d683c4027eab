{
  "comments": [
    {
      "key": {
        "uuid": "1aa4ed85_1284c0d2",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/mapcache/SimpleMapCache.java",
        "patchSetId": 2
      },
      "lineNbr": 109,
      "author": {
        "id": 654
      },
      "writtenOn": "2016-01-07T03:52:22Z",
      "side": 1,
      "message": "what would be the REGDATE be in this case?",
      "range": {
        "startLine": 109,
        "startChar": 83,
        "endLine": 109,
        "endChar": 86
      },
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa4ed85_e6b92916",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/mapcache/SimpleMapCache.java",
        "patchSetId": 2
      },
      "lineNbr": 109,
      "author": {
        "id": 491
      },
      "writtenOn": "2016-01-07T10:57:58Z",
      "side": 1,
      "message": "I still need to write the code for timestamp merging in mergeMappings(). After that, we can read the timestamp from mergedRecord and store it under REGDATE.",
      "parentUuid": "1aa4ed85_1284c0d2",
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa4ed85_d26dc833",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/mapcache/SimpleMapCache.java",
        "patchSetId": 2
      },
      "lineNbr": 185,
      "author": {
        "id": 654
      },
      "writtenOn": "2016-01-07T03:52:22Z",
      "side": 1,
      "message": "I think we agreed that getMapping always returns the subkey.RECORD (merged locators), so we dont need to do any processing on get, unless of course timestamp is expired.",
      "range": {
        "startLine": 185,
        "startChar": 15,
        "endLine": 185,
        "endChar": 16
      },
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa4ed85_46427d11",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/mapcache/SimpleMapCache.java",
        "patchSetId": 2
      },
      "lineNbr": 185,
      "author": {
        "id": 491
      },
      "writtenOn": "2016-01-07T10:57:58Z",
      "side": 1,
      "message": "Right, this is a leftover from patch set 1.\n\nI still have something unclear for getMapping() though. We agreed on supporting 3 different operations: get whatever is under RECORD (when overwrite\u003d1 \u0026\u0026 merge\u003d0; and overwrite\u003d0 \u0026\u0026 merge\u003d1), get a specific xTR-ID, and get all xTR-ID records (when overwrite\u003d0, merge\u003d0). Note that overwrite\u003d1 and merge\u003d0 is not legal and ConfigIni checks for it.\n\nI\u0027m wondering what\u0027s the utility of returning all xTR-ID records when merge is disabled. The caller gets a List\u003cMappingRecord\u003e and we can send a Map-Reply with multiple record, but they all will have the same EID, and I don\u0027t know how an xTR should handle that. Additionally, there is no xTR-ID information in the Map-Reply.",
      "parentUuid": "1aa4ed85_d26dc833",
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa2e39b8_22946e36",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/mapcache/SimpleMapCache.java",
        "patchSetId": 2
      },
      "lineNbr": 185,
      "author": {
        "id": 654
      },
      "writtenOn": "2016-01-07T19:38:46Z",
      "side": 1,
      "message": "Actually I think we agreed on supporting only two cases:\n1) overwrite \u003d 1, merge \u003d 0 : We overwrite subkey.RECORD with new record, and we also store new record under xTR-ID for stats/debuging\n2) overwrite \u003d 0, merge \u003d 1 : We store the merged set under subkey.RECORD, and also store the new record under xTR-ID\noverwrite \u003d 1, merge \u003d 1 : invalid as you said\noverwrite \u003d 0, merge \u003d 0 : results in undefined behavior for a Map-Reply, and shouldnt be used in Map-Reply. \nHowever, NB may want to see such a list. It cant see it with direct RESTCONF because we dont yet have xTR-ID as part of the datastore key/path. So I think we decided to implement an RPC to get that. Right?\nSo in hindsight, we may need only one flag, because merge is defining the behavior when overwrite is 0...",
      "parentUuid": "1aa4ed85_46427d11",
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da33351e_e74576b4",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/mapcache/SimpleMapCache.java",
        "patchSetId": 2
      },
      "lineNbr": 185,
      "author": {
        "id": 491
      },
      "writtenOn": "2016-01-08T12:01:03Z",
      "side": 1,
      "message": "About needing one flag. I think the reason to have two was to avoid the complexity of merging (for performance reasons) while still making available the list of xTR-IDs, which would be overwrite \u003d 0, merge \u003d 0. I don\u0027t mind going back to one flag, but I wouldn\u0027t want to impose the performance penalty of merging if someone just want statistics/info of all registrations.",
      "parentUuid": "fa2e39b8_22946e36",
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da33351e_f5688089",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/mapcache/SimpleMapCache.java",
        "patchSetId": 2
      },
      "lineNbr": 185,
      "author": {
        "id": 654
      },
      "writtenOn": "2016-01-08T17:28:07Z",
      "side": 1,
      "message": "I was thinking that option 1) above still stores per XTR-ID info as I detailed, right? so overwrite \u003d 1, merge \u003d0 will overwrite the RECORD, but still does store per xTR-ID info for monitoring/stats. So we always store per XTR-ID info. Do you see a reason why we wouldnt want to store per-xTR-ID info for monitoring/stats even when overwrite \u003d 1?\nI was thinking overwrite/merge determines what is returned in the Map-Reply on SB, but we always store per xTR-ID as well. \nRegarding removing one of the flags, we dont have to do it now, we just have to agree on what to do in each case. I was thinking we only have two cases as listed above.",
      "parentUuid": "da33351e_e74576b4",
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa4ed85_d27708d3",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/util/MappingMergeUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 654
      },
      "writtenOn": "2016-01-07T03:52:22Z",
      "side": 1,
      "message": "I\u0027ll send an email to lispers to check this.",
      "range": {
        "startLine": 57,
        "startChar": 30,
        "endLine": 57,
        "endChar": 31
      },
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da33351e_673a0638",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/util/MappingMergeUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 57,
      "author": {
        "id": 491
      },
      "writtenOn": "2016-01-08T12:01:03Z",
      "side": 1,
      "message": "Patch set three will have the algorithm detailed by Johnson.",
      "parentUuid": "1aa4ed85_d27708d3",
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa4ed85_12a04042",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/util/MappingMergeUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 654
      },
      "writtenOn": "2016-01-07T03:52:22Z",
      "side": 1,
      "message": "I would change the input var name for MappingRecord to newRecord to make the code more readable inside the method.",
      "range": {
        "startLine": 60,
        "startChar": 91,
        "endLine": 60,
        "endChar": 92
      },
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa4ed85_a6d49147",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/util/MappingMergeUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 60,
      "author": {
        "id": 491
      },
      "writtenOn": "2016-01-07T10:57:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1aa4ed85_12a04042",
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa4ed85_32a3fc50",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/util/MappingMergeUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 654
      },
      "writtenOn": "2016-01-07T03:52:22Z",
      "side": 1,
      "message": "Again here I suggest calling this LocatorRecord newlocator, so it is more readable.",
      "range": {
        "startLine": 74,
        "startChar": 27,
        "endLine": 74,
        "endChar": 34
      },
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa4ed85_46cb5da5",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/util/MappingMergeUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 74,
      "author": {
        "id": 491
      },
      "writtenOn": "2016-01-07T10:57:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1aa4ed85_32a3fc50",
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa4ed85_d28948cb",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/util/MappingMergeUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 75,
      "author": {
        "id": 654
      },
      "writtenOn": "2016-01-07T03:52:22Z",
      "side": 1,
      "message": "newRloc here too.",
      "range": {
        "startLine": 75,
        "startChar": 17,
        "endLine": 75,
        "endChar": 21
      },
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa4ed85_66ce99b6",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/util/MappingMergeUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 75,
      "author": {
        "id": 491
      },
      "writtenOn": "2016-01-07T10:57:58Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1aa4ed85_d28948cb",
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa4ed85_92aaf017",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/util/MappingMergeUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 654
      },
      "writtenOn": "2016-01-07T03:52:22Z",
      "side": 1,
      "message": "this is probably not needed right? if merge didnt happen, mrb already has the locators set, so we wont need this else.",
      "range": {
        "startLine": 100,
        "startChar": 41,
        "endLine": 100,
        "endChar": 43
      },
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aa4ed85_06c5658d",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/util/MappingMergeUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 491
      },
      "writtenOn": "2016-01-07T10:57:58Z",
      "side": 1,
      "message": "I think you\u0027re right, but I\u0027m not sure if we have an .add() at line 89 and the List is modified, that gets reflected.",
      "parentUuid": "1aa4ed85_92aaf017",
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa2e39b8_8299fa70",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/util/MappingMergeUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 654
      },
      "writtenOn": "2016-01-07T19:38:46Z",
      "side": 1,
      "message": "ok :) so we can leave it there for now. But can you make a comment to revisit later ? thanks.",
      "parentUuid": "1aa4ed85_06c5658d",
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "da33351e_87358a48",
        "filename": "mappingservice/implementation/src/main/java/org/opendaylight/lispflowmapping/implementation/util/MappingMergeUtil.java",
        "patchSetId": 2
      },
      "lineNbr": 100,
      "author": {
        "id": 491
      },
      "writtenOn": "2016-01-08T12:01:03Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "fa2e39b8_8299fa70",
      "revId": "5a4770caae3d37c6498726ccdf69d683c4027eab",
      "serverId": "7fc14799-209e-464c-9743-7a06c2c21a81",
      "unresolved": false
    }
  ]
}